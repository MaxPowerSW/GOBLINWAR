#config_version=6
mode:
    start_events: ball_starting
    priority: 100

ball_saves:
  default: # don't start this until all the drops have reset, spinner is settled, etc.
    active_time: 10s
    hurry_up_time: 2s
    grace_period: 2s
    enable_events: sw_playfield_active{current_player.ball_save_enabled==0 and current_player.pf_settled==1 and settings.tournament_mode==0} #, playfield_active  # timer_timer_pf_settled_complete
#    disable_events: 
#    timer_start_events: player_sw_count{current_player.ball_save_enabled==0 and current_player.pf_settled==1} #, playfield_active
    balls_to_save: 1
  kickback: # don't start this until all the drops have reset, spinner is settled, etc.
    active_time: 5s
    hurry_up_time: 2s
    grace_period: 1s
    enable_events: kickback_outlane_kickback_fired
#    disable_events: 
#    timer_start_events: player_sw_count{current_player.ball_save_enabled==0 and current_player.pf_settled==1} #, playfield_active
    balls_to_save: 1

extra_balls:
    purple_eb:
        max_per_game: 99
        award_events: award_extra_ball #shot_purple_rollover_rollover_profile_lit_hit{current_player.extra_balls==0 and settings.tournament_mode==0}

multiball_locks:
    left_hole:
      balls_to_lock: 1
      lock_devices: bd_left_hole
      locked_ball_counting_strategy: physical_only
      disable_events: mode_multiball_started
      reset_count_for_current_player_events: multiball_my_multiball_started
    right_hole:
      balls_to_lock: 1
      lock_devices: bd_right_hole
      locked_ball_counting_strategy: physical_only
      disable_events: mode_multiball_started
      reset_count_for_current_player_events: multiball_my_multiball_started
    top_hole:
      balls_to_lock: 1
      lock_devices: bd_top_hole
      locked_ball_counting_strategy: physical_only
      disable_events: mode_multiball_started
      reset_count_for_current_player_events: multiball_my_multiball_started

multiballs:
    mb_1:
      ball_count: 3
      ball_count_type: total
      start_events: start_multiball
      stop_events: mb1_stop
      ball_locks: bd_left_hole, bd_right_hole, bd_top_hole

show_player:
  ball_save_default_timer_start: 
    ball_save_show
  ball_save_default_hurry_up: 
    ball_save_show:
      action: stop
    ball_save_ending_show:
      action: play
  ball_save_default_grace_period: 
    ball_save_show:
      action: stop
    ball_save_ending_show:
      action: stop
  ball_save_default_disabled:
    ball_save_show:
      action: stop
    ball_save_ending_show:
      action: stop
  ball_save_kickback_timer_start: 
    ball_save_show
  ball_save_kickback_hurry_up: 
    ball_save_show:
      action: stop
    ball_save_ending_show:
      action: play
  ball_save_kickback_grace_period: 
    ball_save_show:
      action: stop
    ball_save_ending_show:
      action: stop
  ball_save_kickback_disabled:
    ball_save_show:
      action: stop
    ball_save_ending_show:
      action: stop

#  player_multiplier{current_player.multiplier==2}:
#    2x_playfield_show:
#      action: play
#  player_multiplier{current_player.multiplier<2}:
#    2x_playfield_show:
#      action: stop
#  award_bonus_value:
#    collect_bonus_show:
#      action: play
#  timer_timer_drops_complete_bonus_delay_complete:
#    collect_bonus_show:
#      action: stop
#ball_save_disabled_show

shows:
  ball_save_show:
    - time: 0
      lights:
        l_shoot_again: on
    - time: +200ms
      lights:
        l_shoot_again: off
    - time: +200ms
  ball_save_ending_show:
    - time: 0
      lights:
        l_shoot_again: on
    - time: +50ms
      lights:
        l_shoot_again: off
    - time: +50ms
  ball_save_disabled_show:
    - time: 0
      lights:
        l_shoot_again: off
    - time: +1

  2x_playfield_show:
    - time: 0
      lights:
        l_2x: on
    - time: +250ms
      lights:
        l_2x: off
    - time: +250ms
  3x_playfield_show:
    - time: 0
      lights:
        l_3x: on
    - time: +250ms
      lights:
        l_3x: off
    - time: +250ms
  4x_playfield_show:
    - time: 0
      lights:
        l_4x: on
    - time: +250ms
      lights:
        l_4x: off
    - time: +250ms
  5x_playfield_show:
    - time: 0
      lights:
        l_5x: on
    - time: +250ms
      lights:
        l_5x: off
    - time: +250ms 

#timed_switches:
#  flipper_cradle:
#    switch_tags: left_flipper, right_flipper
##    time: 3s
#    events_when_active: flipper_cradle
#    events_when_released: flipper_cradle_release

shot_profiles:
    fire_profile:
      advance_on_hit: true
      states:
      - name: unlit
        show: "off"
      - name: lit
        show: "on"
    rollover_profile:
      advance_on_hit: false
      states:
      - name: unlit
        show: "off"
      - name: lit
        show: "on"
    target_profile:
      advance_on_hit: true
      states:
      - name: unlit
        show: "off"
      - name: lit
        show: "on"
    spinner_profile:
      advance_on_hit: false
      states:
      - name: unlit
        show: "off"
      - name: lit
        show: "on"
#    rollover_2x_profile:
#      advance_on_hit: false
#      states:
#      - name: unlit
#        show: "off"
#      - name: lit
#        show: "on"
#      - name: 2x_lit
#        show: "flash2hz"
      

shots:
#GOBLINWAR
    shot_spinner:
      switch: s_15_spinner
      profile: spinner_profile
      persist_enable: false
      reset_events: ball_started
      advance_events: shot_group_front_targets_completed
      show_tokens:
        light: l_spinner
#FIRE rollovers
    shot_f_rollover:
      switch: s_32_f_rollover
      profile: fire_profile
      persist_enable: false
      reset_events: ball_started
      show_tokens:
        light: l_f
    shot_i_rollover:
      switch: s_33_i_rollover
      profile: fire_profile
      persist_enable: false
      reset_events: ball_started
      show_tokens:
        light: l_i
    shot_r_rollover:
      switch: s_34_r_rollover
      profile: fire_profile
      persist_enable: false
      reset_events: ball_started
      show_tokens:
        light: l_r
    shot_e_rollover:
      switch: s_35_e_rollover
      profile: fire_profile
      persist_enable: false
      reset_events: ball_started
      show_tokens:
        light: l_e
#Front targets/drops
    shot_target_1:
      switch: s_17_target_1
      profile: target_profile
      persist_enable: true
      reset_events: ball_started
      show_tokens:
        light: l_target_1
    shot_target_2:
      switch: s_18_target_2
      profile: target_profile
      persist_enable: true
      reset_events: ball_started
      show_tokens:
        light: l_target_2
    shot_target_3:
      switch: s_19_target_3
      profile: target_profile
      persist_enable: true
      reset_events: ball_started
      show_tokens:
        light: l_target_3
    shot_target_4:
      switch: s_21_target_4
      profile: target_profile
      persist_enable: true
      reset_events: ball_started
      show_tokens:
        light: l_target_4
    shot_target_5:
      switch: s_22_target_5
      profile: target_profile
      persist_enable: true
      reset_events: ball_started
      show_tokens:
        light: l_target_5
    shot_target_6:
      switch: s_23_target_6
      profile: target_profile
      persist_enable: true
      reset_events: ball_started
      show_tokens:
        light: l_target_6
#Side targets
    shot_top_power_target:
      switch: s_39_top_power_target
      profile: target_profile
      persist_enable: true
      reset_events: ball_started
      show_tokens:
        light: l_top_right_target
    shot_middle_power_target:
      switch: s_40_middle_power_target
      profile: target_profile
      persist_enable: true
      reset_events: ball_started
      show_tokens:
        light: l_center_right_target
    shot_bottom_power_target:
      switch: s_41_bottom_power_target
      profile: target_profile
      persist_enable: true
      reset_events: ball_started
      show_tokens:
        light: l_bottom_right_target
#Eject Holes
    shot_left_eject:
      switch: s_13_left_eject_hole
      profile: eject_profile
      persist_enable: true
      reset_events: ball_started
      show_tokens:
        light: l_left_eject_hole # is this lamp at the eject or the rollover?
    shot_right_eject:
      switch: s_30_right_eject_hole
      profile: eject_profile
      persist_enable: true
      reset_events: ball_started
      show_tokens:
        light: l_right_eject_hole
    shot_top_eject:
      switch: s_36_top_eject_hole
      profile: eject_profile
      persist_enable: true
      reset_events: ball_started
      show_tokens:
        light: l_top_eject_hole
#Eject Rollovers
    shot_left_eject_rollover:
      switch: s_53_left_eject_rollover
      profile: rollover_profile
      persist_enable: true
      reset_events: ball_started
#      show_tokens:
#        light: l_left_eject_hole
    shot_right_eject_rollover:
      switch: s_54_right_eject_rollover
      profile: rollover_profile
      persist_enable: true
      reset_events: ball_started
#      show_tokens:
#        light: l_right_eject_hole
#Inlanes
    shot_left_inlane:
      switch: s_53_left_eject_rollover
      profile: inlane_profile
      persist_enable: true
      reset_events: ball_started
#      show_tokens:
#        light: l_left_eject_hole
    shot_right_inlane:
      switch: s_54_right_eject_rollover
      profile: inlane_profile
      persist_enable: true
      reset_events: ball_started
#      show_tokens:
#        light: l_right_eject_hole
#Outlanes
    shot_left_outlane:
      switch: s_53_left_eject_rollover
      profile: outlane_profile
      persist_enable: true
      reset_events: ball_started
#      show_tokens:
#        light: l_left_eject_hole
    shot_right_outlane:
      switch: s_54_right_eject_rollover
      profile: outlane_profile
      persist_enable: true
      reset_events: ball_started
#      show_tokens:
#        light: l_right_eject_hole
#Kickers
    shot_left_slingshot:
      switch: s_53_left_eject_rollover
      profile: rollover_profile
      persist_enable: true
      reset_events: ball_started
#      show_tokens:
#        light: l_left_eject_hole
    shot_right_slingshot:
      switch: s_54_right_eject_rollover
      profile: rollover_profile
      persist_enable: true
      reset_events: ball_started
#      show_tokens:
#        light: l_right_eject_hole
#Standups
    shot_left_standup:
      switch: s_53_left_eject_rollover
      profile: rollover_profile
      persist_enable: true
      reset_events: ball_started
#      show_tokens:
#        light: l_left_eject_hole
    shot_right_standup:
      switch: s_54_right_eject_rollover
      profile: rollover_profile
      persist_enable: true
      reset_events: ball_started
#      show_tokens:
#        light: l_right_eject_hole
#Pop Bumpers
    shot_top_left_pop:
      switch: s_53_left_eject_rollover
      profile: rollover_profile
      persist_enable: true
      reset_events: ball_started
#      show_tokens:
#        light: l_left_eject_hole
    shot_top_right_pop:
      switch: s_54_right_eject_rollover
      profile: rollover_profile
      persist_enable: true
      reset_events: ball_started
#      show_tokens:
#        light: l_right_eject_hole
    shot_bottom_left_pop:
      switch: s_53_left_eject_rollover
      profile: rollover_profile
      persist_enable: true
      reset_events: ball_started
#      show_tokens:
#        light: l_left_eject_hole
    shot_bottom_right_pop:
      switch: s_54_right_eject_rollover
      profile: rollover_profile
      persist_enable: true
      reset_events: ball_started
#      show_tokens:
#        light: l_right_eject_hole
#Top Target
    shot_top_target:
      switch: s_53_left_eject_rollover
      profile: rollover_profile
      persist_enable: true
      reset_events: ball_started
#      show_tokens:
#        light: l_left_eject_hole

shot_groups:
#GOBLIN WAR
    fire_rollovers:
      shots: shot_f_rollover, shot_i_rollover, shot_r_rollover, shot_e_rollover
      rotate_left_events: s_06_left_flipper_active
      rotate_right_events: s_04_right_flipper_active
      reset_events: ball_ended
    front_targets:
      shots: shot_top_power_target, shot_middle_power_target, shot_bottom_power_target
      reset_events: ball_ended
#    side_targets:
#      shots: shot_top_power_target, shot_middle_power_target, shot_bottom_power_target
#      reset_events: ball_ended


variable_player:
# initialize variables
# reset these every ball
    timer_timer_pf_settled_complete:
        pf_settled:
          int: 1
          action: set
        multiplier:
          int: 1
          action: set
    timer_timer_pf_settled_complete{current_player.sw_count > 0}:
        sw_count_total:
          int: sw_count_total - sw_count
          action: set
        sw_count:
          int: 0
          action: set
        bonus_value:
          int: 0
          action: set
     #multiball lock handlers
    multiball_lock_top_hole_locked_ball:
        lock_state_top:
          int: 1
          action: set
    multiball_lock_left_hole_locked_ball:
        lock_state_left:
          int: 1
          action: set
    multiball_lock_right_hole_locked_ball:
        lock_state_right:
          int: 1
          action: set
    shot_group_front_targets_complete:
        kickback_enabled:
          int: 1
          action: set
    ball_started:
        pf_settled:
          int: 0
          action: set
        show_running:
          int: 0
          action: set
        tilt_as_weapon:
          int: 0
          action: set
        kickback_enabled:
          int: 1
          action: set
        multiplier:
          int: 0 #prevents any scoring before the playfield is settled.
          action: set
        bonus_multiplier:
          int: 1
          action: set
        awarded_bonus_value:
          int: 0
          action: set
        awarded_bonus_multiplier:
          int: 0
          action: set
        awarded_bonus_collect:
          int: 0
          action: set
        all_banks_down:
          int: 0
          action: set
        sw_count:     
          int: 0
          action: set
        pop_count:     
          int: 0
          action: set
        spinner_count:
          int: 0
          action: set
        rollover_count:
          int: 0
          action: set
        bonus_value:
          int: 0
          action: set
        video_sequence:
          int: 0
          action: set
        ball_save_enabled:
          int: 0
          action: set
        spinner_value_add:
          int: 0
          action: set
    ball_save_default_timer_start:
        ball_save_enabled:
          int: 1
          action: set
    kickback_outlane_kickback_fired:
        kickback_enabled:
          int: 0
          action: set
        
# reset these at the beginning of the game
    ball_started{current_player.score==0}:
        sw_count_total:
          int: 0
          action: set
        spinner_count_total:
          int: 0
          action: set
        rollover_count_total:
          int: 0
          action: set
        pop_count_total:
          int: 0
          action: set
        pf_multiplier_score_total:
          int: 0
          action: set
        spinner_value_add_total:
          int: 0
          action: set
        show_tournament_message:
          int: 0
          action: set
    ball_started{current_player.score==0 and settings.tournament_mode==1}:
        show_tournament_message:
          int: 1
          action: set
# music select mode
    start_music_select:
        music_mode:
          int: 1
          action: set
        music_type:
          int: 1
          action: set
        music_selection:
          int: 1
          action: set
    player_music_type:
        current_music_type:
          int: current_player.music_type
          action: set_machine
    s_02_right_flipper_inactive{current_player.music_selection==1}:
        music_type: 1
    s_01_left_flipper_inactive{current_player.music_selection==1}:
        music_type: -1
    player_music_type{current_player.music_selection==1 and value>3}:
        music_type:
          int: 1
          action: set
    player_music_type{current_player.music_selection==1 and value<1}:
        music_type:
          int: 3
          action: set
    sw_playfield_active{current_player.music_selection==1}:
        music_selection:
          int: 0
          action: set
    flipper_cancel{current_player.music_selection==1}:
        music_selection:
          int: 0
          action: set
#end music selection events


# GOBLIN WAR scoring

# switch counts, base values
# Spinner 100/1000
    shot_spinner_hit:
        sw_count: 1
        sw_count_total: 1
        spinner_count: 1
        spinner_count_total: 1
    shot_spinner_unlit_hit:
        score: 100 * current_player.multiplier
    shot_spinner_lit_hit:
        score: 1000 * current_player.multiplier
        spinner_lit_count: 1
        spinner_lit_count_total: 1
# FIRE rollovers 1000 (All the time?) - Add bonus if unlit
    shot_f_rollover_hit:
        score: 1000 * current_player.multiplier
        sw_count: 1
        sw_count_total: 1
    shot_f_rollover_fire_profile_unlit_hit:
        bonus: 1000
    shot_i_rollover_hit:
        score: 1000 * current_player.multiplier
        sw_count: 1
        sw_count_total: 1
    shot_i_rollover_fire_profile_unlit_hit:
        bonus: 1000
    shot_r_rollover_hit:
        score: 1000 * current_player.multiplier
        sw_count: 1
        sw_count_total: 1
    shot_r_rollover_fire_profile_unlit_hit:
        bonus: 1000
    shot_e_rollover_hit:
        score: 1000 * current_player.multiplier
        sw_count: 1
        sw_count_total: 1
    shot_e_rollover_fire_profile_unlit_hit:
        bonus: 1000

# Inlanes 1000/3000 (1000/3000 bonus)
# Outlanes 1000 (1000 bonus)
# Front Targets/Drops 1000 - Add 1000 bonus when flashing?
# Side Targets 1000
# Eject rollovers 1000
# Eject Holes 1000/10000
# Pop Bumpers 100/1000
# Standups 50
# Top Target

#OLD SINBAD RULES
    shot_rollover_buttons_hit:
        score: 100 * current_player.multiplier
        sw_count: 1
        sw_count_total: 1
        rollover_count: 1
        rollover_count_total: 1
        advance_bonus: 1
        advance_bonus_total: 1
        spinner_value_add: 10
        spinner_value_add_total: 10
    shot_right_yellow_rollover_hit:
        sw_count: 1
        sw_count_total: 1
    shot_right_yellow_rollover_rollover_2x_profile_unlit_hit:
        score: 500 * current_player.multiplier
    shot_right_yellow_rollover_rollover_2x_profile_lit_hit:
        score: 5000 * current_player.multiplier
    shot_right_yellow_rollover_rollover_2x_profile_2x_lit_hit:
        score: 5000 * current_player.multiplier
    shot_right_yellow_rollover_rollover_2x_profile_2x_lit_hit{current_player.bonus_multiplier==5 and current_player.multiplier==1}:
        score: 5000 * current_player.multiplier
        pf_multiplier:
          int: 2
          action: set
    shot_yellow_rollover_hit:
        sw_count: 1
        sw_count_total: 1
    shot_yellow_rollover_rollover_profile_unlit_hit:
        score: 500 * current_player.multiplier
    shot_yellow_rollover_rollover_profile_lit_hit:
        score: 5000 * current_player.multiplier
    shot_white_rollover_hit:
        sw_count: 1
        sw_count_total: 1
    shot_white_rollover_rollover_profile_unlit_hit:
        score: 100 * current_player.multiplier
    shot_white_rollover_rollover_profile_lit_hit:
        score: 1000 * current_player.multiplier
    shot_red_rollover_hit:
        sw_count: 1
        sw_count_total: 1
    shot_red_rollover_rollover_profile_unlit_hit:
        score: 500 * current_player.multiplier
    shot_red_rollover_rollover_profile_lit_hit: #SPECIAL
        score: 5000 * current_player.multiplier
    shot_lower_target_unlit_hit:
        score: 100 * current_player.multiplier
    shot_lower_target_lit_hit:
        score: 1000 * current_player.multiplier
    shot_upper_target_unlit_hit:
        score: 100 * current_player.multiplier
    shot_upper_target_lit_hit:
        score: 1000 * current_player.multiplier




#static / no lamp
    s_14_pop_bumper_active:
        score: 100 * current_player.multiplier
        sw_count: 1
        sw_count_total: 1
        pop_count: 1
        pop_count_total: 1
    s_54_10_pt_switches_active:
        score: 10 * current_player.multiplier
        sw_count: 1
        sw_count_total: 1

    player_advance_bonus{current_player.advance_bonus>=5}:
        advance_bonus:
          int: 0
          action: set
        bonus_value: 1000
#    player_bonus_multiplier{current_player.bonus_multiplier>=5}:
#        bonus_multiplier:
#          int: 5
#          action: set
    player_bonus_value{current_player.bonus_value>19000}:
        bonus_value:
          int: 19000
          action: set
    start_2x_playfield:
        multiplier:
          int: 2
          action: set
    player_score{current_player.multiplier>1 and change!=50000}:
        pf_multiplier_score_total: change
      
#score_queue_player:
#    chime_10:
#      chimes_score: 10
#    chime_100:
#      chimes_score: 100
#    chime_1000:
#      chimes_score: 1000


event_player:
# MULTIBALL
    player_lock_state_top{current_player.lock_state_top==1 and current_player.lock_state_left==1 and current_player.lock_state_right==1}:
      - start_multiball
    player_lock_state_left{current_player.lock_state_top==1 and current_player.lock_state_left==1 and current_player.lock_state_right==1}:
      - start_multiball
    player_lock_state_right{current_player.lock_state_top==1 and current_player.lock_state_left==1 and current_player.lock_state_right==1}:
      - start_multiball
# TILT_OVERRIDE
    s_01_cab_tilt_active{current_player.tilt_as_weapon==0}:
      - player_tilt_warning
    s_01_cab_tilt_active{current_player.tilt_as_weapon==1}:
      - player_tilt_weapon
#SFX TRIGGERS
    shot_spinner_hit:
      - sfx_spinner
    shot_lower_target_hit:
      - sfx_target
    shot_purple_rollover_hit:
      - sfx_rollover



timers:
    timer_pf_settled:
      start_value: 3
      end_value: 0
      direction: down
      control_events:
        - action: restart
          event: mode_base_started
# Purpose of this delay is to give MPF time to load the video file before trying to play it. This tries to avoid a black screen / loading failure when switching videos.
    timer_video_start_delay:
      start_value: 1
      end_value: 0
      direction: down
      tick_interval: 200ms # 100ms on Ryzen5 PC, 150ms on Celeron.
      control_events:
        - action: restart
          event: slide_mode_base_slide_created # start the timer at th end of the 4th drop complete event

random_event_player:
    start_random_video:
      events:
        set_video_a: 5 #tiger fight
        set_video_b: 5 #skeleton fight
        set_video_c: 5 #the cage
      force_all: true
      force_different: true

#redo this so lights don't interfere with shows?
light_player:  
  "{current_player.show_running == 0 and current_player.bonus_multiplier == 2}":
    l_2x: on
  "{current_player.show_running == 0 and current_player.bonus_multiplier == 3}":
    l_3x: on
  "{current_player.show_running == 0 and current_player.bonus_multiplier == 4}":
    l_4x: on
  "{current_player.show_running == 0 and current_player.bonus_multiplier == 5}":
    l_5x: on
  "{current_player.show_running == 0 and current_player.extra_balls > 0}":
    l_shoot_again: on

  "{current_player.bonus_value == 1000 or current_player.bonus_value == 11000}":
    l_1000_bonus: on
  "{current_player.bonus_value == 2000 or current_player.bonus_value == 12000}":
    l_2000_bonus: on
  "{current_player.bonus_value == 3000 or current_player.bonus_value == 13000}":
    l_3000_bonus: on
  "{current_player.bonus_value == 4000 or current_player.bonus_value == 14000}":
    l_4000_bonus: on
  "{current_player.bonus_value == 5000 or current_player.bonus_value == 15000}":
    l_5000_bonus: on
  "{current_player.bonus_value == 6000 or current_player.bonus_value == 16000}":
    l_6000_bonus: on
  "{current_player.bonus_value == 7000 or current_player.bonus_value == 17000}":
    l_7000_bonus: on
  "{current_player.bonus_value == 8000 or current_player.bonus_value == 18000}":
    l_8000_bonus: on
  "{current_player.bonus_value == 9000 or current_player.bonus_value == 19000}":
    l_9000_bonus: on
  "{current_player.bonus_value >= 10000}":
    l_10000_bonus: on
  "{current_player.kickback_enabled == 1}":
    l_ball_save: on


#DISPLAY RELATED STUFF
slide_player:
  mode_base_started: mode_base_slide

slides:
  mode_base_slide:
    widgets:
      - type: text
        text: (score)
        number_grouping: true
        min_digits: 2
        font_size: 212
        font_name: Sinbad
        anchor_y: center
        anchor_x: center
        z: 100
      - type: text
        text: (score)
        number_grouping: true
        min_digits: 2
        font_size: 212
        font_name: Sinbad
        anchor_y: center
        anchor_x: center
        x: center+5
        y: center-5
        color: black
        z: 99
      - type: text
        text: Player (number)
        y: 50
        x: 50
        font_name: Sinbad
        font_size: 100
        anchor_x: left
        anchor_y: bottom
        z: 100
      - type: text
        text: Ball (ball)
        y: 50
        x: right-50
        anchor_x: right
        anchor_y: bottom
        font_size: 100
        font_name: Sinbad
        z: 100
      - type: text
        text: Player (number)
        y: 45
        x: 55
        font_name: Sinbad
        font_size: 100
        anchor_x: left
        anchor_y: bottom
        color: black
        z: 99
      - type: text
        text: Ball (ball)
        y: 45
        x: right-45
        anchor_x: right
        anchor_y: bottom
        font_size: 100
        font_name: Sinbad
        color: black
        z: 99
      - type: text
        text: "(player1|score)"
        x: right - 50
        y: top - 50
        z: 100
        font_name: Sinbad
        font_size: 50
        anchor_x: right
        number_grouping: true
        min_digits: 2
      - type: text
        text: "(player1|score)"
        x: right - 48
        y: top - 52
        z: 99
        color: black
        font_name: Sinbad
        font_size: 50
        anchor_x: right
        number_grouping: true
        min_digits: 2
      - type: text
        text: "(player2|score)" # 
        x: right - 50
        y: top - 100
        z: 100
        font_name: Sinbad
        font_size: 50
        anchor_x: right
        number_grouping: true
        min_digits: 2
      - type: text
        text: "(player2|score)" # 
        x: right - 48
        y: top - 102
        z: 99
        color: black
        font_name: Sinbad
        font_size: 50
        anchor_x: right
        number_grouping: true
        min_digits: 2
      - type: text
        text: "(player3|score)"
        x: right - 50
        y: top - 150
        z: 100
        font_size: 50
        font_name: Sinbad
        anchor_x: right
        number_grouping: true
        min_digits: 2
      - type: text
        text: "(player3|score)"
        x: right - 48
        y: top - 152
        z: 99
        color: black
        font_size: 50
        font_name: Sinbad
        anchor_x: right
        number_grouping: true
        min_digits: 2
      - type: text
        text: "(player4|score)"
        x: right - 50
        y: top - 200
        z: 100
        font_size: 50
        font_name: Sinbad
        anchor_x: right
        number_grouping: true
        min_digits: 2
      - type: text
        text: "(player4|score)"
        x: right - 48
        y: top - 202
        z: 99
        color: black
        font_size: 50
        font_name: Sinbad
        anchor_x: right
        number_grouping: true
        min_digits: 2
#      - type: text
#        text: "P Music: (music_type) M Music: (machine|current_music_type)"
#        x: right - 50
#        y: top - 250
#        z: 100
#        font_size: 50
#        font_name: Sinbad
#        anchor_x: right
#        number_grouping: true
#        min_digits: 2
#      - widget: video_sequence_a
#        z: 0
#      - widget: video_sequence_b
#        z: 0
#      - widget: video_sequence_c
#        z: 0
#      - widget: video_sequence_d
#        z: 0
#      - widget: video_sequence_e
#        z: 0
#      - widget: video_sequence_f
#        z: 0


widgets:
  my_widget:
    type: text
    text: TEST    # no expiration here
    font_size: 100
    font_name: Sinbad
    z: 100
  widget_debug_text:
      - type: text
        text: "BONUS MULT: (bonus_multiplier)"
        x: 25
        y: 1050
        font_size: 25
        anchor_x: left
        z: 100
      - type: text
        text: "BONUS_VALUE: (bonus_value)" # 
        x: 25
        y: 1025
        font_size: 25
        anchor_x: left
        z: 100
      - type: text
        text: "SWITCH COUNT: (sw_count)/(sw_count_total)"
        x: 25
        y: 1000
        font_size: 25
        anchor_x: left
        z: 100
      - type: text
        text: "ROLLOVER COUNT: (rollover_count)/(rollover_count_total)"
        x: 25
        y: 975
        font_size: 25
        anchor_x: left
        z: 100
      - type: text
        text: "DROP HITS: (drop_count)/(drop_count_total)"
        x: 25
        y: 950
        font_size: 25
        anchor_x: left
        z: 100
      - type: text
        text: "SPINNER COUNT: (spinner_count)/(spinner_count_total)"
        x: 25
        y: 925
        font_size: 25
        anchor_x: left
        z: 100
      - type: text
        text: "TILT AS WEAPON: (tilt_as_weapon)"
        x: 25
        y: 900
        font_size: 25
        anchor_x: left
        z: 100
      - type: text
        text: "KICKBACK ENABLED: (kickback_enabled)"
        x: 25
        y: 875
        font_size: 25
        anchor_x: left
        z: 100
      - type: text
        text: "VIDEO_SEQUENCE: (video_sequence)"
        x: 25
        y: 850
        font_size: 25
        anchor_x: left
        z: 100
      - type: text
        text: "ALL_BANKS_COMPLETED: (all_banks_completed)/(all_banks_completed_total)"
        x: 25
        y: 825
        font_size: 25
        anchor_x: left
        z: 100
      - type: text
        text: "PF MULTIPLIER: (multiplier)"
        x: 25
        y: 800
        font_size: 25
        anchor_x: left
        z: 100
      - type: text
        text: "BANK COMPLETION: (white_bank_completed) (yellow_bank_completed) (purple_bank_completed) (red_bank_completed)"
        x: 25
        y: 775
        font_size: 25
        anchor_x: left
        z: 100
      - type: text
        text: "2X TOTAL: (pf_multiplier_score_total)"
        x: 25
        y: 750
        font_size: 25
        anchor_x: left
        z: 100
      - type: text
        text: "PF SETTLED: (pf_settled)"
        x: 25
        y: 725
        font_size: 25
        anchor_x: left
        z: 100
      - type: text
        text: "BALL SAVE ENABLED: (ball_save_enabled)"
        x: 25
        y: 700
        font_size: 25
        anchor_x: left
        z: 100
      - type: text
        text: "EXTRA BALLS: (extra_balls)"
        x: 25
        y: 675
        font_size: 25
        anchor_x: left
        z: 100
      - type: text
        text: "SPINNER VALUE ADD: (spinner_value_add)"
        x: 25
        y: 650
        font_size: 25
        anchor_x: left
        z: 100
      - type: text
        text: "SPINNER VALUE ADD TOTAL: (spinner_value_add_total)"
        x: 25
        y: 625
        font_size: 25
        anchor_x: left
        z: 100
      - type: text
        text: "LAST SCENE BONUS: (awarded_bonus_collect_text)"
        x: 25
        y: 600
        font_size: 25
        anchor_x: left
        z: 100
      - type: text
        text: "SCENE BONUS TOTAL: (scene_bonus_total)"
        x: 25
        y: 575
        font_size: 25
        anchor_x: left
        z: 100
      - type: text
        text: "POP COUNT: (pop_count)/(pop_count_total)"
        x: 25
        y: 550
        font_size: 25
        anchor_x: left
        z: 100
  widget_2x_playfield_text:
    type: text
    text: "2x Scoring"    # no expiration here
    font_size: 100
#    font_name: Sinbad
    z: 100
    x: center
    y: center+300
  widget_2x_playfield_text2:
    type: text
    text: "2x Scoring"    # no expiration here
    font_size: 100
#    font_name: Sinbad
    z: 100
    x: center+5
    y: center+295
    color: black
  widget_ball_saved_text:
    type: text
    text: "Ball Saved"    # no expiration here
    font_size: 100
#    font_name: Sinbad
    z: 100
    x: center
    y: center+300
  widget_ball_saved_text2:
    type: text
    text: "Ball Saved"    # no expiration here
    font_size: 100
#    font_name: Sinbad
    z: 100
    x: center+5
    y: center+295
    color: black
  widget_extra_ball_text:
    type: text
    text: "Extra Ball"    # no expiration here
    font_size: 100
#    font_name: Sinbad
    z: 100
    x: center
    y: center+300
  widget_extra_ball_text2:
    type: text
    text: "Extra Ball"    # no expiration here
    font_size: 100
#    font_name: Sinbad
    z: 100
    x: center+5
    y: center+295
    color: black
  widget_shoot_again_text:
    type: text
    text: "Shoot Again"    # no expiration here
    font_size: 100
#    font_name: Sinbad
    z: 100
    x: center
    y: center+300
  widget_shoot_again_text2:
    type: text
    text: "Shoot Again"    # no expiration here
    font_size: 100
#    font_name: Sinbad
    z: 100
    x: center+5
    y: center+295
    color: black
  widget_shoot_again_multiplayer_text:
    type: text
    text: "Player (number) Shoot Again"    # no expiration here
    font_size: 100
#    font_name: Sinbad
    z: 100
    x: center
    y: center+300
  widget_shoot_again_multiplayer_text2:
    type: text
    text: "Player (number) Shoot Again"    # no expiration here
    font_size: 100
#    font_name: Sinbad
    z: 100
    x: center+5
    y: center+295
    color: black
  widget_drops_complete_text:
    type: text
    text: "Scene Completed: (awarded_bonus_collect_text)" # (awarded_bonus_value) (awarded_bonus_multiplier)"    # no expiration here
    font_size: 100
#    font_name: FtySkorzhenNcv-Yo02
    z: 100
    x: center
    y: center+450
  widget_drops_complete_text2:
    type: text
    text: "Scene Completed: (awarded_bonus_collect_text)" # (awarded_bonus_value) (awarded_bonus_multiplier)"    # no expiration here
    font_size: 100
#    font_name: FtySkorzhenNcv-Yo02
    z: 100
    x: center+5
    y: center+445
    color: black
  widget_music_type_1_text:
      - type: text
        text: Sinbad
        y: 50
        x: center
        anchor_x: center
        anchor_y: bottom
        font_size: 100
        font_name: Sinbad
        z: 100
      - type: text
        text: Sinbad
        y: 45
        x: center+5
        font_name: Sinbad
        font_size: 100
        anchor_x: center
        anchor_y: bottom
        color: black
        z: 99
  widget_music_type_2_text:
      - type: text
        text: Wu-Tang Clan
        y: 50
        x: center
        anchor_x: center
        anchor_y: bottom
        font_size: 100
        font_name: Sinbad
        z: 100
      - type: text
        text: Wu-Tang Clan
        y: 45
        x: center+5
        font_name: Sinbad
        font_size: 100
        anchor_x: center
        anchor_y: bottom
        color: black
        z: 99
  widget_music_type_3_text:
      - type: text
        text: Sahara
        y: 50
        x: center
        anchor_x: center
        anchor_y: bottom
        font_size: 100
        font_name: Sinbad
        z: 100
      - type: text
        text: Sahara
        y: 45
        x: center+5
        font_name: Sinbad
        font_size: 100
        anchor_x: center
        anchor_y: bottom
        color: black
        z: 99
  widget_tournament_mode_enabled_text:
    - type: text
      text: "TOURNAMENT MODE"    # no expiration here
      font_size: 100
      font_name: FtySkorzhenNcv-Yo02
      z: 100
      x: center
      y: center+450
    - type: text
      text: "TOURNAMENT MODE"    # no expiration here
      font_size: 100
      font_name: FtySkorzhenNcv-Yo02
      z: 99
      x: center+5
      y: center+445
      color: black
    - type: text
      text: "NO BALL SAVES, NO EXTRA BALLS"    # no expiration here
      font_size: 50
      font_name: FtySkorzhenNcv-Yo02
      z: 100
      x: center
      y: center+375
    - type: text
      text: "NO BALL SAVES, NO EXTRA BALLS"    # no expiration here
      font_size: 50
      font_name: FtySkorzhenNcv-Yo02
      z: 99
      x: center+2
      y: center+373
      color: black
  video_sequence_a:
        type: video
        video: tiger_fight
        end_behavior: loop
        auto_play: false
        volume: 0.33
        height: 1080
        width: 1920
        z: 0
        control_events:
          - event: slide_title_screen2_active
            action: stop
          - event: start_video_a
            action: play
          - event: start_video
            action: play
          - event: stop_video_a
            action: stop
          - event: stop_video
            action: stop
          - event: set_video_pos_a
            action: position
            value: 0.0
          - event: set_video_pos_b
            action: position
            value: 114
          - event: set_video_pos_c
            action: position
            value: 165
          - event: set_video_pos_d
            action: position
            value: 226
          - event: set_video_pos_e
            action: position
            value: 296
          - event: set_volume_100
            action: volume
            value: 0.33
          - event: set_volume_50
            action: volume
            value: 0.25
          - event: set_volume_0
            action: volume
            value: 0
  video_sequence_b:
        type: video
        video: skeleton_fight
        end_behavior: loop
        auto_play: false
        volume: 0.33
        height: 1080
        width: 1920
        z: 0
        control_events:
          - event: slide_title_screen2_active
            action: stop
          - event: start_video_b
            action: play
          - event: start_video
            action: play
          - event: stop_video_b
            action: stop
          - event: stop_video
            action: stop
          - event: set_video_pos_a
            action: position
            value: 0.0
          - event: set_video_pos_b
            action: position
            value: 58
          - event: set_video_pos_c
            action: position
            value: 125
          - event: set_video_pos_d
            action: position
            value: 163
          - event: set_video_pos_e
            action: position
            value: 189
          - event: set_volume_100
            action: volume
            value: 0.33
          - event: set_volume_50
            action: volume
            value: 0.25
          - event: set_volume_0
            action: volume
            value: 0
  video_sequence_c:
        type: video
        video: sinbad_cage
        end_behavior: loop
        auto_play: false
        volume: 0.70
        height: 1080
        width: 1920
        z: 0
        control_events:
          - event: slide_title_screen2_active
            action: stop
          - event: start_video_c
            action: play
          - event: start_video
            action: play
          - event: stop_video_c
            action: stop
          - event: stop_video
            action: stop
          - event: set_video_pos_a
            action: position
            value: 0.0
          - event: set_video_pos_b
            action: position
            value: 41 # create cage
          - event: set_video_pos_c
            action: position
            value: 70
          - event: set_video_pos_d
            action: position
            value: 86
          - event: set_video_pos_e
            action: position
            value: 111
          - event: set_volume_100
            action: volume
            value: 0.70
          - event: set_volume_50
            action: volume
            value: 0.25
          - event: set_volume_0
            action: volume
            value: 0

widget_player:
  ball_started{current_player.score==0 and settings.tournament_mode==1}:
    widget_tournament_mode_enabled_text:
      action: add
  ball_started{settings.debug_info==1}:
    widget_debug_text:
      action: add
  sw_playfield_active{current_player.score>0 and current_player.show_tournament_message==1}:
    widget_tournament_mode_enabled_text:
      action: remove
  player_music_selection{value==0}:
    widget_music_type_1_text:
      action: remove
    widget_music_type_2_text:
      action: remove
    widget_music_type_3_text:
      action: remove
  player_music_type{current_player.music_type==1 and current_player.music_selection==1}:
    widget_music_type_1_text:
      action: add
  player_music_type{prev_value==1}:
    widget_music_type_1_text:
      action: remove
  player_music_type{current_player.music_type==2 and current_player.music_selection==1}:
    widget_music_type_2_text:
      action: add
  player_music_type{prev_value==2}:
    widget_music_type_2_text:
      action: remove
  player_music_type{current_player.music_type==3 and current_player.music_selection==1}:
    widget_music_type_3_text:
      action: add
  player_music_type{prev_value==3}:
    widget_music_type_3_text:
      action: remove
  start_2x_playfield:
    widget_2x_playfield_text:
      action: add
    widget_2x_playfield_text2:
      action: add
#  player_bank_progress{current_player.bank_progress<4}:
#    my_widget:
#      widget_settings:
#        expire: 5s
  award_bonus_value:
    widget_drops_complete_text:
      widget_settings:
        expire: 5s
    widget_drops_complete_text2:
      widget_settings:
        expire: 5s
  ball_save_default_saving_ball:
    widget_ball_saved_text:
      widget_settings:
        expire: 5s
    widget_ball_saved_text2:
      widget_settings:
        expire: 5s
  ball_save_drops_complete_saving_ball:
    widget_ball_saved_text:
      widget_settings:
        expire: 5s
    widget_ball_saved_text2:
      widget_settings:
        expire: 5s
  extra_ball_awarded:
    widget_extra_ball_text:
      widget_settings:
        expire: 5s
    widget_extra_ball_text2:
      widget_settings:
        expire: 5s
  ball_started{is_extra_ball==True and game.num_players==1}:
    widget_shoot_again_text:
      widget_settings:
        expire: 10s
    widget_shoot_again_text2:
      widget_settings:
        expire: 10s
  ball_started{is_extra_ball==True and game.num_players>1}:
    widget_shoot_again_multiplayer_text:
      widget_settings:
        expire: 10s
    widget_shoot_again_multiplayer_text2:
      widget_settings:
        expire: 10s
  set_video_a: 
    video_sequence_a:
      action: add
  stop_video_a:
    video_sequence_a:
      action: remove

#SFX RELATED STUFF
sound_player:
    tilt_warning_1: call_tilt_warning
    tilt_warning_2: call_tilt_warning
    tilt: call_tilt
    sfx_spinner: sfx_spinner
    shot_rollover_buttons_hit: sfx_spinner
#    sfx_drop: sfx_drop
    sfx_target: sfx_target
#    sfx_10pt: sfx_10pt
    sfx_rollover: sfx_rollover
    sfx_pop: sfx_pop

    player_multiplier{current_player.multiplier>1}: call_2x
    ball_started{player==1 and is_extra_ball==False and game.num_players>1}: call_player1up
    ball_started{player==2 and is_extra_ball==False}: call_player2up
    player_added{num==2}: call_player2
    ball_started{player==3 and is_extra_ball==False}: call_player3up
    player_added{num==3}: call_player3
    ball_started{player==4 and is_extra_ball==False}: call_player4up
    player_added{num==4}: call_player4
    ball_started{is_extra_ball==True}: call_shoot_again
    ball_save_default_saving_ball: call_ball_save
    ball_save_drops_complete_saving_ball: call_ball_save_drops_complete
#    player_purple_bank_completed{current_player.purple_bank_completed>0 and current_player.extra_balls==0}: call_extra_ball_lit
    extra_ball_awarded: call_extra_ball
#    mode_wizard_started: call_wizard_mode

sound_pools:
#SFX
    sfx_spinner:
      track: sfx
      simultaneous_limit: 16
      sounds:
        - "totan_sitar1"
        - "totan_sitar2"
        - "totan_sitar3"
        - "totan_sitar4"
        - "totan_sitar5"
        - "totan_sitar6"
        - "totan_sitar7"
        - "totan_sitar8"
        - "totan_sitar9"
        - "totan_sitar10"
        - "totan_sitar11"
        - "totan_sitar12"
        - "totan_sitar13"
        - "totan_sitar14"
        - "totan_sitar15"
        - "totan_sitar14"
        - "totan_sitar13"
        - "totan_sitar12"
        - "totan_sitar11"
        - "totan_sitar10"
        - "totan_sitar9"
        - "totan_sitar8"
        - "totan_sitar7"
        - "totan_sitar6"
        - "totan_sitar5"
        - "totan_sitar4"
        - "totan_sitar3"
        - "totan_sitar2"
    sfx_drop:
      track: sfx
      type: random
      sounds:
        - "totan_swords"
        - "totan_swords2"
        - "totan_swords3"
    sfx_pop:
      track: sfx
      type: random
      sounds:
        - "totan_swords"
        - "totan_swords2"
        - "totan_swords3"
    sfx_target:
      track: sfx
      type: random
      sounds:
#        - "totan_gong"
        - "totan_swords"
        - "totan_swords2"
        - "totan_swords3"
    sfx_10pt:
      track: sfx
      type: random
      sounds:
        - "totan_swords"
        - "totan_swords2"
        - "totan_swords3"
    sfx_rollover:
      track: sfx
      type: random
      sounds:
        - "totan_swords"
        - "totan_swords2"
        - "totan_swords3"
#CALLOUTS
    call_player1:
      track: voice
      sounds:
        - "totan_player1"
    call_player2:
      track: voice
      sounds:
        - "totan_player2"
    call_player3:
      track: voice
      sounds:
        - "totan_player3"
    call_player4:
      track: voice
      sounds:
        - "totan_player4"
    call_player1up:
      track: voice
      sounds:
        - "totan_player1_up"
    call_player2up:
      track: voice
      sounds:
        - "totan_player2_up"
    call_player3up:
      track: voice
      sounds:
        - "totan_player3_up"
    call_player4up:
      track: voice
      sounds:
        - "totan_player4_up"

#    call_bonus_x:
#      track: voice
#      type: random
#      sounds:
#        - "Sound-0x0342 - Bonus X"
#        - "Sound-0x0341 - Bonus X"
#        - "Sound-0x033A - Bonus X"
#        - "Sound-0x033B - Bonus X"
    call_tilt_warning:
      track: voice
      type: random
      sounds:
        - "totan_look_out"
    call_tilt:
      track: voice
      type: random
      sounds:
        - "totan_oh_my"
        - "totan_powerful"
        - "totan_hahaha"
        - "totan_hahaha2"
    call_2x: 
      track: voice
      type: random
      sounds:
        - "totan_oh_my"
        - "totan_you_did_it"
    call_scene_completed:
      track: voice
      type: random
      sounds:
        - "totan_glorius"
        - "totan_amazing"
        - "totan_amazing2"
        - "totan_haha_yes"
        - "totan_hahaha"
        - "totan_hahaha2"
        - "totan_hero"
        - "totan_marvelous"
        - "totan_wonderful"
        - "totan_wonderful2"
        - "totan_wonderful3"
        - "totan_wow"

    call_extra_ball_lit:
      track: voice
      type: random
      sounds:
        - "totan_extra_ball_lit"
        - "totan_extra_ball_lit2"
    call_extra_ball:
      track: voice
      type: random
      sounds:
        - "totan_extra_ball"
    call_shoot_again:
      track: voice
      type: random
      sounds:
        - "totan_shoot_again"
        - "totan_shoot_again2"
        - "totan_shoot_again3"
    call_ball_save:
      track: voice
      type: random
      sounds:
        - "totan_fly"
        - "totan_i_will_help_you"
    call_ball_save_drops_complete:
      track: voice
      sounds:
        - "totan_earned_this_one"
    call_start_1p:
      track: voice
      type: random
      sounds:
       - "totan_tales_begin"
